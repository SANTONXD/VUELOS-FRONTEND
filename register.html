<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Registro - Vuelos</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<header>
  <h1>Crear Cuenta</h1>
</header>

<nav>
  <a href="index.html">Inicio</a>
  <a href="login.html">Iniciar sesión</a>
</nav>

<main>

<form id="registerForm">

  <label>Nombre
    <input name="name" required />
  </label>

  <label>Email
    <input type="email" name="email" required />
  </label>

  <label>Contraseña
    <input type="password" name="password" required minlength="6" />
  </label>

  <button type="submit">Registrar</button>
</form>

<section id="msg"></section>

</main>

<footer>
  <a href="https://github.com/SANTONXD/VUELOS-FRONTEND" target="_blank">
    <svg height="24" width="24" viewBox="0 0 16 16" fill="#b44a55">
      <path d="M8 0C3.58 0 0 3.58 ..."></path>
    </svg>
  </a>
</footer>

<script>
  const API_BASE = 'https://proyecto-sis.onrender.com';
  const form = document.getElementById('registerForm');
  const msg = document.getElementById('msg');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    msg.textContent = "Enviando...";
    const fd = new FormData(form);

    const body = {
      name: fd.get('name'),
      email: fd.get('email'),
      password: fd.get('password')
    };

    const res = await fetch(API_BASE + '/auth/register', {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    });

    const data = await res.json();

    if (!res.ok) return msg.textContent = data.error;

    msg.textContent = "Registro exitoso.";
    setTimeout(() => location.href = "login.html", 800);
  });
</script>

</body>
</html>
